<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        button {
            border: 1px solid black;
            width: 60px;
            height: 120px;
            background-color: white;
        }

        div {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <audio src="notas/cPiano.wav" id="au1"></audio>
    <audio src="notas/dPiano.wav" id="au2"></audio>
    <audio src="notas/ePiano.wav" id="au3"></audio>
    <audio src="notas/fPiano.wav" id="au4"></audio>
    <audio src="notas/gPiano.wav" id="au5"></audio>
    <audio src="notas/aPiano.wav" id="au6"></audio>
    <audio src="notas/bPiano.wav" id="au7"></audio>
    <audio src="notas/c5Piano.wav" id="au8"></audio><br>
    <div>
        <button onclick="h()" style="background: grey;color:aliceblue">probar</button>
        <select name="" id="notas" onchange="ar=[1]">
            <option value="1/2/3">do re mi</option>
            <option>1/3/5</option>
            <option>1/4/6</option>
            <option>1/2/3/4/5/6/7/8</option>
            <option>6/7/8</option>
        </select>
    </div>
    <div>
        <button id="b1"></button><button id="b2"></button><button id="b3"></button><button id="b4"></button><button
            id="b5"></button><button id="b6"></button><button id="b7"></button><button id="b8"></button>
    </div>

    <input type="text" name="" id="inp">
    <script>
        x = 0
        ar = [1]
        // au1.play()
        au1.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au2.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au3.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au4.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au5.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au6.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au7.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        au8.addEventListener('ended', () => { if (x < ar.length) { h() } else { agregar() } })
        function agregar() {
            x = 0
            n = notas.value.split('/')
            console.log(n)
            ale1 = Math.floor(Math.random() * n.length) 
            esc = n[ale1]
            ale = Math.floor(Math.random() * 7) + 1
            ar.push(parseInt(esc))
            console.log('ale'+ale)
            console.log('esc'+esc)
            console.log(ar)
            c = ar.toString().replaceAll(',', '').slice(0, ar.length - 1)
            // console.log(c)
        }

        function h() {
            inp.focus()
            inp.value = ''
            switch (ar[x]) {
                case 1: { au1.play(); hover(b1); break }
                case 2: { au2.play(); hover(b2); break }
                case 3: { au3.play(); hover(b3); break }
                case 4: { au4.play(); hover(b4); break }
                case 5: { au5.play(); hover(b5); break }
                case 6: { au6.play(); hover(b6); break }
                case 7: { au7.play(); hover(b7); break }
                case 8: { au8.play(); hover(b8); break }
            }
            x++
        }

        function hover(z) {
            z.style.background = 'black'
            setTimeout(() => {
                z.style.background = 'white'
            }, 300);
        }

        inp.addEventListener('input', (e) => {
            if (e.target.value == c) { h() }
        })
    </script>
</body>

</html>